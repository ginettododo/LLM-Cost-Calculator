:root {
  color-scheme: dark;
  --bg: #090d14;
  --surface: #111722;
  --surface-elevated: #141d2b;
  --surface-strong: #1a2434;
  --text: #e7edf7;
  --muted: #90a0ba;
  --border: rgba(151, 169, 199, 0.22);
  --border-strong: rgba(151, 169, 199, 0.4);
  --accent: #7f9fff;
  --accent-strong: #6889ff;
  --warning: #f3c567;
  --success: #76d8a8;
  --radius-s: 10px;
  --radius-m: 14px;
  --font-sans: "Inter", "SF Pro Text", system-ui, -apple-system, sans-serif;
  --font-mono: "SF Mono", "JetBrains Mono", Menlo, Consolas, monospace;
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
}

.app[data-theme="light"] {
  color-scheme: light;
  --bg: #f2f5fb;
  --surface: #ffffff;
  --surface-elevated: #f7f9fd;
  --surface-strong: #eef3fb;
  --text: #102036;
  --muted: #5f6f8a;
  --border: rgba(16, 32, 54, 0.16);
  --border-strong: rgba(16, 32, 54, 0.28);
  --accent: #3559e6;
  --accent-strong: #2648cf;
}
*{box-sizing:border-box}
body{margin:0;font-family:var(--font-sans);background:var(--bg);color:var(--text)}
h1,h2,h3,p{margin:0}
.app{min-height:100vh;padding:56px 12px 20px;display:flex;flex-direction:column;gap:var(--space-3);background:var(--bg)}
.app__toolbar{position:fixed;top:0;left:0;right:0;z-index:20;background:color-mix(in srgb, var(--bg) 90%, transparent);backdrop-filter: blur(10px);display:flex;align-items:center;justify-content:space-between;padding:var(--space-2) 12px;border-bottom:1px solid var(--border)}
.app__toolbar-actions{display:flex;gap:var(--space-2);align-items:center;flex-wrap:wrap;justify-content:flex-end}
.app__toolbar-brand{font-size:12px;color:var(--muted);font-weight:600}
.app__icon-btn{min-width:30px;padding:4px 8px !important}
.app__toolbar-export{display:flex;gap:var(--space-2)}
.app__title-row{display:flex;flex-direction:column;gap:4px;max-width:1200px;width:100%;margin:0 auto}
.app__subtitle{font-size:12px;color:var(--muted)}
.app__main{display:flex;flex-direction:column;gap:var(--space-3);max-width:1200px;margin:0 auto;width:100%}
.app__section--top{display:grid;grid-template-columns:1.25fr .9fr;gap:var(--space-3)}
.app__inspector{display:flex;flex-direction:column;gap:var(--space-3)}
.ui-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-m);padding:var(--space-3)}
.ui-card--inset{background:var(--surface-elevated)}
.app__card-header{display:flex;justify-content:space-between;gap:var(--space-2);align-items:center;flex-wrap:wrap}
.app__card-header--stack{align-items:flex-start}
.app__actions{display:flex;gap:var(--space-2)}
.app__actions-group{display:flex;gap:var(--space-2);align-items:center;flex-wrap:wrap}
.ui-button{border:1px solid var(--border);border-radius:999px;padding:6px 12px;font-size:12px;background:var(--surface-strong);color:var(--text);cursor:pointer}
.ui-button--primary{background:linear-gradient(135deg,var(--accent),var(--accent-strong));color:#fff;border-color:transparent}
.ui-button--ghost{background:transparent}
.ui-button--warning{background:rgba(243,197,103,.16)}
.ui-button--sm{padding:4px 10px;font-size:11px}
.ui-button:disabled{opacity:.5;cursor:not-allowed}
.ui-toggle{display:inline-flex;gap:6px;align-items:center;font-size:11px;color:var(--muted)}
.ui-toggle__input{position:absolute;opacity:0}
.ui-toggle__control{width:34px;height:18px;border-radius:999px;border:1px solid var(--border);background:var(--surface-strong);position:relative}
.ui-toggle__control::after{content:"";position:absolute;left:2px;top:2px;width:12px;height:12px;border-radius:50%;background:var(--text);transition:transform .18s}
.ui-toggle__input:checked + .ui-toggle__control{background:rgba(127,159,255,.25);border-color:rgba(127,159,255,.6)}
.ui-toggle__input:checked + .ui-toggle__control::after{transform:translateX(16px)}
.ui-toggle__description{display:none}
.ui-toggle__text{display:flex}
.ui-badge{padding:2px 8px;font-size:10px;border-radius:999px;border:1px solid transparent}
.ui-badge--neutral{background:rgba(151,169,199,.14);color:var(--muted);border-color:rgba(151,169,199,.3)}
.ui-badge--success{background:rgba(118,216,168,.15);border-color:rgba(118,216,168,.4);color:var(--text)}
.ui-badge--warning{background:rgba(243,197,103,.15);border-color:rgba(243,197,103,.4);color:var(--text)}
.app__textarea-shell{position:relative;margin-top:var(--space-2)}
.app__textarea{position:relative;z-index:1;width:100%;min-height:120px;border-radius:var(--radius-s);background:transparent;border:1px solid var(--border);padding:var(--space-3);font-size:13px;color:var(--text);line-height:1.45;resize:vertical}
.app__textarea:focus{outline:1px solid color-mix(in srgb,var(--accent) 55%, transparent);outline-offset:0}
.app__token-overlay{position:absolute;inset:0;z-index:0;pointer-events:none;white-space:pre-wrap;overflow-wrap:break-word;padding:var(--space-3);font-size:13px;line-height:1.45;color:transparent;border:1px solid var(--border);border-radius:var(--radius-s);background:var(--surface-strong)}
.app__token-overlay-mark{box-shadow:inset 0 -2px 0 rgba(127,159,255,.45);background:rgba(127,159,255,.16);border-radius:2px}
.app__textarea-footer{margin-top:var(--space-2);display:flex;gap:var(--space-2);padding:var(--space-2);border:1px solid var(--border);border-radius:var(--radius-s);background:var(--surface-elevated)}
.app__metric-label{font-size:10px;text-transform:uppercase;color:var(--muted)}
.app__metric-value{font-size:13px;font-weight:600}
.app__empty-state{margin-top:var(--space-2);padding:var(--space-2);border:1px dashed var(--border);border-radius:var(--radius-s);font-size:12px}
.app__kpi-row{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-2)}
.app__kpi-chip{border:1px solid var(--border);border-radius:var(--radius-s);padding:var(--space-2);background:var(--surface-strong);display:flex;flex-direction:column;gap:2px;font-size:11px}
.app__kpi-chip strong{font-size:14px}
.app__details-inline{display:flex;flex-wrap:wrap;gap:10px;font-size:12px;color:var(--muted)}
.app__field{display:flex;flex-direction:column;gap:4px}.app__label{font-size:11px;color:var(--muted)}
.app__select,.app__input{border:1px solid var(--border);border-radius:var(--radius-s);background:var(--surface-strong);color:var(--text);padding:8px 10px;font-size:12px}
.app__summary-grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:var(--space-2)}
.app__summary-item{background:var(--surface-elevated);border:1px solid var(--border);border-radius:var(--radius-s);padding:var(--space-2)}
.app__value{font-size:14px;font-weight:700}
.app__warning{border:1px solid rgba(243,197,103,.5);background:rgba(243,197,103,.11);padding:var(--space-2);border-radius:var(--radius-s);font-size:12px;display:flex;flex-direction:column;gap:6px}
.app__warning--critical{border-color:rgba(235,92,92,.6);background:rgba(235,92,92,.14)}
.app__featured-strip{display:flex;gap:var(--space-2);overflow-x:auto;padding-bottom:2px;margin-top:var(--space-2)}
.app__featured-card{border:1px solid var(--border);background:var(--surface-strong);color:var(--text);border-radius:var(--radius-s);padding:8px;min-width:150px;display:flex;flex-direction:column;gap:4px;cursor:pointer}
.app__featured-detail{margin-top:var(--space-2);display:flex;gap:10px;flex-wrap:wrap;font-size:12px;color:var(--muted)}
.app__accordion summary{cursor:pointer;font-size:12px;color:var(--muted);margin:var(--space-2) 0}
.app__table-controls{display:flex;gap:var(--space-2);flex-wrap:wrap;position:sticky;top:44px;padding:var(--space-2) 0;background:var(--surface);z-index:2}
.app__control{display:flex;flex-direction:column;gap:4px;min-width:120px}.app__control--search{flex:1}
.ui-table-shell__scroll{overflow:auto;border:1px solid var(--border);border-radius:var(--radius-s);background:var(--surface-elevated)}
.app__table{width:100%;min-width:720px;border-collapse:collapse;font-size:12px}
.app__table th,.app__table td{padding:8px 10px;border-bottom:1px solid var(--border)}
.app__table th{position:sticky;top:0;background:var(--surface-strong);z-index:1;text-transform:uppercase;font-size:10px;color:var(--muted)}
.app__table-sort{border:none;background:transparent;color:inherit;cursor:pointer;font-size:inherit;padding:0}
.app__cell--numeric{text-align:right;font-family:var(--font-mono)}
.app__table-group td{background:var(--surface);font-size:10px;color:var(--muted)}
.app__cost{display:flex;flex-direction:column;gap:2px}.app__muted,.app__note,.app__hint{font-size:11px;color:var(--muted)}
.app__table-help{display:inline-flex;gap:4px;align-items:center}.app__help-button{width:16px;height:16px;border-radius:50%;border:1px solid var(--border);background:var(--surface-strong);color:var(--text);font-size:10px}
.ui-popover{position:relative}.ui-popover__panel{position:absolute;top:calc(100% + 6px);right:0;z-index:30;background:var(--surface-elevated);border:1px solid var(--border);border-radius:var(--radius-s);padding:6px;display:flex;flex-direction:column;gap:4px;min-width:180px}
.ui-popover__panel--start{left:0;right:auto}
.app__menu-item{border:none;background:transparent;color:var(--text);font-size:12px;padding:6px 8px;text-align:left;border-radius:8px;cursor:pointer}
.app__menu-item:hover{background:rgba(151,169,199,.14)}
.app__preset-menu{display:flex;flex-direction:column;gap:4px;min-width:230px}
.app__preset-item{border:1px solid transparent;background:transparent;color:var(--text);text-align:left;padding:6px 8px;border-radius:8px;display:flex;justify-content:space-between;gap:8px;font-size:12px;cursor:pointer}
.app__preset-item:hover{background:rgba(151,169,199,.14);border-color:var(--border)}
.app__preset-length{font-size:11px;color:var(--muted)}
.ui-tooltip{position:relative}.ui-tooltip__content{position:absolute;bottom:calc(100% + 6px);left:50%;transform:translateX(-50%);padding:6px 8px;font-size:11px;background:#0b1220;border:1px solid var(--border);border-radius:8px;opacity:0;pointer-events:none}.ui-tooltip:hover .ui-tooltip__content,.ui-tooltip:focus-within .ui-tooltip__content{opacity:1}
.app__error-panel{padding:var(--space-2);border:1px solid rgba(235,92,92,.5);border-radius:var(--radius-s);background:rgba(235,92,92,.1);font-size:12px}
.app__debug-panel{display:flex;flex-direction:column;gap:var(--space-2)}
.app__debug-columns{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-2)}
.app__debug-block{border:1px solid var(--border);border-radius:var(--radius-s);background:var(--surface-elevated);padding:var(--space-2)}
.app__debug-text,.app__token-list{max-height:180px;overflow:auto;font-size:11px;font-family:var(--font-mono)}
.app__token-row{display:grid;grid-template-columns:38px 60px 90px 1fr;gap:6px;font-size:10px}
.app__token-underlined{text-decoration:underline;text-decoration-color:var(--accent);background:rgba(127,159,255,.1)}

.app__token-markup-panel{margin-top:var(--space-2);border:1px solid var(--border);border-radius:var(--radius-s);background:var(--surface-elevated)}
.app__token-markup-toggle{width:100%;display:flex;justify-content:space-between;align-items:center;border:none;background:transparent;color:var(--text);padding:8px 10px;font-size:12px;cursor:pointer}
.app__token-markup-list{max-height:180px;overflow:auto;padding:0 10px 10px;display:flex;flex-direction:column;gap:4px}
.app__token-markup-row{display:grid;grid-template-columns:38px 58px 88px 1fr;gap:6px;font-size:10px;font-family:var(--font-mono)}
.app__toast{position:fixed;left:50%;bottom:10px;transform:translateX(-50%);padding:6px 10px;border-radius:999px;background:var(--surface-elevated);border:1px solid var(--border);display:flex;gap:8px;align-items:center;z-index:40}
.app__sr-live{position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(0 0 0 0)}
.app__skeleton{display:inline-block;height:10px;width:100%;background:linear-gradient(90deg,rgba(151,169,199,.1),rgba(151,169,199,.24),rgba(151,169,199,.1));background-size:200% 100%;animation:shimmer 1.2s infinite}
@keyframes shimmer{from{background-position:200% 0}to{background-position:-200% 0}}
.app__skeleton-row td{padding:10px}
.app__table-section{display:flex;flex-direction:column;gap:var(--space-2)}
.app__empty{text-align:center;color:var(--muted);padding:16px}
.app__help-panel{font-size:11px;max-width:230px}
.app__title-row h1{font-size:20px}
.app__header{display:none}
.app__hint--tight{margin-top:4px}
.app__toggle{display:flex;gap:8px;font-size:12px;color:var(--text);align-items:center}
.app__toggle input{accent-color:var(--accent)}
.app__debug-block h3{font-size:12px}
.app__table-shell{position:relative}
.app__table-sort-icon{margin-left:4px}
.app__model-cell{display:flex;gap:6px;flex-wrap:wrap}
.app__toast .ui-button{padding:4px 8px}
.app__control .ui-toggle{height:100%}
.app__toolbar .ui-toggle__text{flex-direction:row;gap:2px;align-items:center}
.app__toolbar .ui-toggle__label{font-size:11px}
.app__toolbar .ui-toggle__description{display:none}
.app__toolbar .ui-toggle{gap:4px}
.app__toolbar .ui-toggle__control{width:30px;height:16px}
.app__toolbar .ui-toggle__control::after{width:10px;height:10px}
.app__toolbar .ui-toggle__input:checked + .ui-toggle__control::after{transform:translateX(14px)}
@media (max-width: 900px){.app__section--top{grid-template-columns:1fr}.app__summary-grid{grid-template-columns:1fr 1fr 1fr}.app__debug-columns{grid-template-columns:1fr}.app__table-controls{top:42px}}
@media (max-width: 720px){.app{padding:52px 8px 12px}.app__toolbar{padding:6px 8px}.app__toolbar-brand{display:none}.app__title-row h1{font-size:18px}.app__summary-grid{grid-template-columns:1fr}.app__kpi-row{grid-template-columns:1fr}.app__table-controls{flex-direction:column;align-items:stretch;top:40px}.app__control{width:100%}}
